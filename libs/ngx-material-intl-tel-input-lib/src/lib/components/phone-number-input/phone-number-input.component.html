<mat-form-field [appearance]="appearance()" class="number-form-field">
  @if (textLabels()?.nationalNumberLabel) {
    <mat-label>{{ textLabels()?.nationalNumberLabel }}</mat-label>
  }
  <input
    matInput
    type="tel"
    [formControl]="numberControl"
    [placeholder]="selectedCountry()?.placeHolder || ''"
    autocomplete="off"
    (focus)="onFocus()"
    (blur)="onBlur()"
    [required]="required()"
    [attr.maxlength]="maxLength()"
    #numberInput
    [imask]="selectedCountry()?.mask"
  />

  @if (!hidePhoneIcon()) {
    <mat-icon matSuffix>
      @if (iconMakeCall() && numberControl.valid && numberControl.value) {
        <a
          [href]="'tel:' + numberControl.value"
          [attr.aria-label]="'Call ' + numberControl.value"
        >
          <ng-container *ngTemplateOutlet="phoneIcon"> </ng-container>
        </a>
      } @else {
        <ng-container *ngTemplateOutlet="phoneIcon"> </ng-container>
      }
    </mat-icon>
  }
</mat-form-field>

<ng-template #phoneIcon>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="icon icon-tabler icon-tabler-phone"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    fill="none"
    stroke-linecap="round"
    stroke-linejoin="round"
    aria-hidden="true"
  >
    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
    <path
      d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"
    />
  </svg>
</ng-template>
